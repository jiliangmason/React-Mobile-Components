@import "../../../style/index.scss";

@include b(checkbox) {
    display: inline-block;
    vertical-align: middle;
    position: relative;
    color: var(--color-text);
    font-size: r(14);

    &:not(&--disabled):hover {
        @include e(inner) {
          border-color: var(--theme-primary);
        }
    }

    @include e(widget) {
        display: inline-block;
        vertical-align: middle;
    }

    @include e(input) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
    }

    @include e(text) {
        vertical-align: middle;
        margin: 0 r(8);
    }

    @include e(inner) {
        display: flex;
        align-items: center;
        justify-content: center;
        width: var(--checkbox-size);
        height: var(--checkbox-size);
        border: 1px solid var(--checkbox-border-color);
        border-radius: var(--checkbox-radius);
        background: var(--color-text-inverse);
        transition: all .2s cubic-bezier(.71, -0.46, .88, .6);
    
        &:before {
          content: '';
          width: calc(var(--checkbox-size) / 3.5);
          height: calc(var(--checkbox-size) / 2);
          border: calc(var(--checkbox-size) / 9) solid var(--color-text-inverse);
          border-top: 0;
          border-left: 0;
          margin-top: calc(var(--checkbox-size) / -12);
          margin-left: calc(var(--checkbox-size) / 18);
          transform: rotate(45deg) scale(0);
          transition: all .2s cubic-bezier(.71, -0.46, .88, .6);
        }
    }

    // 未全选状态
    @include m(indeterminate) {
        @include e(inner) {
            &:before {
                transform: rotate(0) scale(1);
                width: calc(var(--checkbox-size) / 2.33);
                height: calc(var(--checkbox-size) / 2.33);
                margin-top: 0;
                margin-left: 0;
                border: none;
                background-color: var(--theme-primary);
            }
        }

        @include m(disabled) {
            @include e(inner) {
                &:before {
                transform: rotate(0) scale(1);
                background-color: var(--checkbox-disabled-color);
                }
            }
        }
    }

    // 选中状态
    @include m(checked) {
        @include e(inner) {
            border-color: var(--theme-primary);
            background-color: var(--theme-primary);

            &:before {
                transform: rotate(45deg) scale(1);
                transition: all .2s cubic-bezier(.12, .4, .29, 1.46) .1s;
            }
        }
    }

    // 禁用状态
    @include m(disabled) {
        @include e(input) {
            cursor: not-allowed;
        }

        @include e(text) {
            color: var(--color-text-disabled);
        }

        @include e(inner) {
            background-color: var(--background-disabled);
        }

        @include m(checked) {
            @include e(inner) {
                border-color: var(--checkbox-border-color);
                background-color: var(--background-disabled);

                &:before {
                    border-color: var(--checkbox-disabled-color);
                }
            }
        }
    }

    // 无文本状态
    @include m(untext) {
        line-height: 1;
    }
}

@include b(checkbox-group) {
    display: inline-block;
    vertical-align: middle;
    overflow: hidden;

    @include e(inner) {
        margin-right: r(-24);
        margin-bottom: r(-8);
    }

    @include b(checkbox) {
        margin-right: r(24);
        margin-bottom: r(8);
    }

    // 通栏样式
    @include m(block) {
        width: 100%;

        @include e(inner) {
            display: flex;
            flex-wrap: wrap;
        }

        @include b(checkbox) {
            flex: 1;
        }
    }
}